<script>
  const AI_ENDPOINT = "https://politiegeweld-chat.suleyman-m-guerrouj.workers.dev/";
</script>

<!doctype html>
<html lang="nl">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="theme-color" content="#0b0f14">
  <title>Home — Actieplatform Politiegeweld</title>
  <link rel="manifest" href="manifest.webmanifest">
  <link rel="icon" href="icons/logo.png">
  <link rel="apple-touch-icon" href="icons/logo.png">
  <link rel="stylesheet" href="style.css">
</head>
<body>
  <!-- NAVIGATIE -->
  <nav class="nav">
    <div class="container nav-inner">
      <div class="brand">
        <img src="icons/logo.png" alt="Logo" style="width:50px;height:50px;border-radius:6px">
        <strong>Actieplatform Politiegeweld</strong>
      </div>
      <div class="menu">
        <a href="index.html"><strong>Home</strong></a>
        <a href="uitgebreid-melden.html">Uitgebreid melden</a>
        <a href="meldingen-live-kaart.html">Meldingen & Live Kaart</a>
        <a href="meedoen.html">Meedoen</a>
        <a href="juridisch.html">Juridisch (geschillen)</a>
        <a href="uitspraken.html">Rechterlijke uitspraken</a>
        <a href="privacy.html">Privacy</a>
      </div>
    </div>
  </nav>

  <!-- HERO -->
  <header class="container hero">
    <span class="kicker">Meldpunt & Actie</span>
    <h1>Actieplatform Politiegeweld</h1>
    <p>
      Er vallen steeds meer doden en gewonden door politiegeweld, terwijl onafhankelijk toezicht tekortschiet.
      Daarom verzamelen we meldingen, bouwen we dossiers en koppelen we juridische steun — voor echte verandering.
    </p>
    <div style="display:flex;gap:12px;flex-wrap:wrap;margin-top:12px">
      <a class="btn" href="uitgebreid-melden.html">Uitgebreid melden</a>
      <a class="btn outline" href="meldingen-live-kaart.html">Bekijk meldingen & kaart</a>
    </div>
  </header>

  <!-- INHOUD -->
  <main class="container">
    <section class="section grid">
      <div class="card">
        <span class="badge">Waarom dit platform?</span>
        <h2>Collectieve bescherming</h2>
        <p>
          We brengen meldingen samen en zetten ze om in actie: dossiervorming, juridische opvolging en publieke verantwoording.
        </p>
      </div>
      <aside class="card">
        <h3>Wat jij kunt doen</h3>
        <ul class="list">
          <li>Meld een incident (kort of uitgebreid)</li>
          <li>Upload bewijsmateriaal (video/foto/audio)</li>
          <li><a href="meedoen.html">Sluit je aan als vrijwilliger of jurist</a></li>
        </ul>
      </aside>
    </section>

    <section class="section grid">
      <div class="card">
        <span class="badge">Transparantie</span>
        <h2>Meldingen & Live Kaart</h2>
        <p class="small">
          Zie waar incidenten plaatsvinden en hoe vaak — meldingen verschijnen live op de kaart.
        </p>
        <a class="btn" href="meldingen-live-kaart.html">Ga naar kaart</a>
      </div>
      <aside class="card">
        <h3>Privacy</h3>
        <p class="small">
          We volgen dataminimalisatie en delen niets zonder juridische noodzaak of toestemming.
          Bekijk onze <a href="privacy.html">privacyverklaring</a>.
        </p>
      </aside>
    </section>

    <!-- NIEUWE SECTIE: RECHTERLIJKE UITSPRAKEN -->
    <section class="section">
      <div class="card">
        <span class="badge">Rechtspraak</span>
        <h2>Rechterlijke uitspraken</h2>
        <p class="small">
          Overzicht van zaken waarin politieagenten zijn veroordeeld voor buitensporig geweld of machtsmisbruik.
        </p>
        <a class="btn" href="uitspraken.html">Bekijk uitspraken</a>
      </div>
    </section>
  </main>

  <!-- FOOTER -->
  <footer class="container footer">
    © <span id="y"></span> Actieplatform Politiegeweld — 
    <a href="mailto:label@hot-shot.com">label@hot-shot.com</a>
  </footer>

  <script>
    document.getElementById('y').textContent = new Date().getFullYear();
  </script>

  <!-- ===================== CHAT WIDGET (overlay, één exemplaar) ===================== -->
  <button class="chat-launcher" aria-label="Open chat" id="chatOpen">?</button>
  <div class="chat-backdrop" id="chatBackdrop"></div>
  <div class="chat-panel" id="chatPanel" role="dialog" aria-label="AI Chat">
    <div class="chat-header">
      <div class="chat-title">
        <img src="icons/logo.png" alt="logo" style="width:20px;height:20px">
        <strong>AI Chat (pilot)</strong>
      </div>
      <div>
        <button id="chatClear" title="Nieuw gesprek" style="background:transparent;color:#9fb3c8;border:none;margin-right:8px;cursor:pointer">↺</button>
        <button id="chatClose" title="Sluiten" style="background:transparent;color:#fff;border:none;font-size:18px;cursor:pointer">×</button>
      </div>
    </div>
    <div class="chat-body" id="chatBody">
      <div class="chat-msg bot">
        Welkom! Stel je vraag over politiegeweld, melden of (algemene) rechtspraak.
        <div class="small" style="margin-top:6px;color:#9fb3c8">
          Let op: dit is géén persoonlijk juridisch advies. Deel geen persoonsgegevens.
        </div>
      </div>
    </div>
    <div class="chat-input">
      <input id="chatInput" placeholder="Bijv. ‘Hoe dien ik aangifte in?’">
      <button id="chatSend">Stuur</button>
    </div>
    <div class="chat-disclaimer">
      Hulpfunctie, geen vervanging van juridisch advies. Bij spoed: bel je advocaat.
    </div>
  </div>

  <script>
    // ---------- Chat overlay gedrag ----------
    const openBtn = document.getElementById('chatOpen');
    const panel = document.getElementById('chatPanel');
    const backdrop = document.getElementById('chatBackdrop');
    const closeBtn = document.getElementById('chatClose');
    const clearBtn = document.getElementById('chatClear');
    const input = document.getElementById('chatInput');
    const sendBtn = document.getElementById('chatSend');
    const bodyEl = document.getElementById('chatBody');

    function openChat(){
      panel.style.display = 'block';
      backdrop.style.display = 'block';
      document.body.classList.add('body-nosroll');
      input.focus();
    }
    function closeChat(){
      panel.style.display = 'none';
      backdrop.style.display = 'none';
      document.body.classList.remove('body-nosroll');
    }
    function addMsg(text, who='bot'){
      const el = document.createElement('div');
      el.className = 'chat-msg ' + who;
      el.innerHTML = text;
      bodyEl.appendChild(el);
      bodyEl.scrollTop = bodyEl.scrollHeight;
    }
    function clearChat(){
      bodyEl.innerHTML = '<div class="chat-msg bot">Nieuw gesprek gestart. Hoe kan ik helpen?</div>';
    }

    openBtn.addEventListener('click', openChat);
    closeBtn.addEventListener('click', closeChat);
    backdrop.addEventListener('click', closeChat);
    clearBtn.addEventListener('click', clearChat);
    document.addEventListener('keydown', (e)=>{ if(e.key==='Escape') closeChat(); });

    // ---------- FAQ fallback ----------
    const FAQ = [
      {
        q: /(hoe\s*(doe|dien)\s*ik\s*een?\s*aangifte)|(^aangifte\s*doen)|\baangifte\b/i,
        a: `
        <strong>Aangifte doen (strafbaar feit door politie):</strong><br>
        1) Verzamel bewijs: tijdlijn, locatie, getuigen, medische info, beeldmateriaal.<br>
        2) Ga naar het politiebureau of bel 0900-8844 voor een afspraak. Je hebt recht op het doen van aangifte.<br>
        3) Vraag om een <em>aangiftebevestiging</em> en <em>proces-verbaalnummer</em> en bewaar kopieën.<br>
        4) Stuur aanvullend bewijs later na onder vermelding van je kenmerk/zaaknummer.<br>
        5) Wordt aangifte geweigerd? Noteer namen/tijden en overweeg klacht of art. 12 Sv-klacht (zie ‘Juridisch’).<br>
        <em>Let op:</em> dit is geen persoonlijk advies; overleg met een strafrechtadvocaat.
        `
      },
      {
        q: /(klacht\s*OM)|(klacht\s*politie)|ombudsman|klachtenprocedure/i,
        a: `
        <strong>Klacht indienen:</strong><br>
        • <u>Politieklacht</u>: via de klachtenregeling; bewaar ontvangstbevestiging.<br>
        • <u>Nationale Ombudsman</u>: bij ontevredenheid over overheidsoptreden.<br>
        • <u>OM</u>: voor strafrechtelijke beoordeling; bij sepot kun je art. 12 Sv overwegen.<br>
        Tip: voeg bewijs toe en houd een tijdlijn bij.
        `
      },
      {
        q: /art(ikel)?\s*12\s*sv|artikel\s*12|art\.\s*12/i,
        a: `
        <strong>Art. 12 Sv (klacht tegen sepot):</strong><br>
        1) Vraag het hof om vervolging te bevelen als het OM niet vervolgt.<br>
        2) Dien een gemotiveerd klaagschrift in (feiten, bewijs, reden vervolging).<br>
        3) Het hof kan zitting houden; licht je stukken toe. Overweeg advocaat.
        `
      },
      {
        q: /proces[- ]?verbaal|valse\s*pv|leugen\s*(in\s*)?pv/i,
        a: `
        <strong>Twijfel aan proces-verbaal:</strong><br>
        • Vraag dossierinzage (incl. bodycam/radio/verslagen).<br>
        • Leg tegenstrijdigheden vast en verzamel onafhankelijk bewijs.<br>
        • Laat je advocaat onderzoekswensen indienen. Meld uitgebreid via ‘Uitgebreid melden’.
        `
      },
      {
        q: /video|audio|foto|bewijs|upload/i,
        a: `
        <strong>Bewijs aanleveren:</strong> Snel melden via ‘Meldingen & Live Kaart’. Uitgebreid melden met bestanden via ‘Uitgebreid melden’. 
        Tip: versleutel bestanden vooraf (7-Zip/Cryptomator) en deel wachtwoorden via apart kanaal.
        `
      },
      {
        q: /privacy|anoniem|gegevens/i,
        a: `
        <strong>Privacy:</strong> dataminimalisatie, niets delen zonder toestemming of noodzaak. 
        Zie ‘Privacy’. Deel geen BSN of andere gevoelige persoonsgegevens in de chat.
        `
      }
    ];

    // ---------- AI endpoint (Cloudflare Worker) ----------
    // Vul HIER je Worker-URL in, bijv.:
    // const AI_ENDPOINT = 'https://actieplatform-ai.username.workers.dev';
    const AI_ENDPOINT = null; // laat op null = FAQ-modus; zet je Worker URL om AI te activeren

    function replyLocal(text){
      const hit = FAQ.find(f => f.q.test(text));
      if (hit) addMsg(hit.a, 'bot');
      else addMsg("Ik weet dit niet zeker. Probeer je vraag specifieker te maken (bijv. ‘Hoe dien ik aangifte in?’) — of bekijk ‘Uitgebreid melden’, ‘Meldingen & Live Kaart’, ‘Juridisch (geschillen)’ en ‘Rechterlijke uitspraken’.", 'bot');
    }

    async function handleSend(){
      const text = (input.value||'').trim();
      if(!text) return;
      addMsg(text, 'user');
      input.value = '';

      if (AI_ENDPOINT){
        try{
          const r = await fetch(AI_ENDPOINT, {
            method:'POST',
            headers:{'Content-Type':'application/json'},
            body: JSON.stringify({question: text})
          });
          const data = await r.json();
          if (data?.answer) addMsg(data.answer, 'bot');
          else replyLocal(text);
          return;
        }catch(e){
          addMsg('AI-verbinding faalde, ik probeer lokaal te antwoorden…','bot');
        }
      }
      replyLocal(text);
    }

    sendBtn.addEventListener('click', handleSend);
    input.addEventListener('keydown', (e)=>{ if(e.key==='Enter'){ handleSend(); }});
  </script>
</body>
</html>
